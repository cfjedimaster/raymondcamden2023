
<div class="comment" id="c_1713741174">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741174">1</a> by J Haag
		posted on 5/22/2012 at 7:08 PM
		</div>
		<div class="comment_text"><p>haha..canvas does have a use case! Nice work! Looking forward to testing this out. Thanks for sharing.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741176">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741176">2</a> by WilFlo13
		posted on 5/22/2012 at 7:16 PM
		</div>
		<div class="comment_text"><p>Nice work!<br>Thanks again for your help !</p><p>Looking forward to see this example in your next book on PhoneGap/Cordova... ;-)</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741175">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741175">3</a> by John Walker
		posted on 5/22/2012 at 9:59 PM
		</div>
		<div class="comment_text"><p>We may incorporate taking pictures and watermarking them in the trucking co app.....</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741181">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741181">4</a> by Raymond Camden
		posted on 5/22/2012 at 10:16 PM
		</div>
		<div class="comment_text"><p>"Trucking Co App".... I bet that app is being built by an awesome, and handsome, developer!</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741179">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741179">5</a> by einKorken
		posted on 12/29/2013 at 4:01 AM
		</div>
		<div class="comment_text"><p>Hello Raymond, I've been reading a lot of your entries lately [ google always sends me to you ;) ] and they have been very helpful.</p><p>I am using your code snippet above,<br>but I can't figure out how to get the code to display the full picture taken from the camera (or chosen from photo library) it always just displays a part of the image and often it stretches it. I took out targetWidth and targetHeight and changed #myCanvas size but it still does not display the image correctly, can you help me?</p><p>I am using an iPhone4S and Cordova 3</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741183">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741183">6</a> by einKorken
		posted on 12/29/2013 at 5:07 AM
		</div>
		<div class="comment_text"><p>For example I take this photo: <a href="http://disq.us/url?url=http%3A%2F%2Fi.imgur.com%2FgKlKynL.jpg%3A0w_TRqaUb9LNkiWKbiHFhSLJCoc&amp;cuid=3321886" rel="nofollow noopener" title="http://i.imgur.com/gKlKynL.jpg">http://i.imgur.com/gKlKynL.jpg</a><br>and this gets displayed: <a href="http://disq.us/url?url=http%3A%2F%2Fi.imgur.com%2Fh2az6kt.png%3AIRaXY7A2HUhFK_UsCrvjox7GN1U&amp;cuid=3321886" rel="nofollow noopener" title="http://i.imgur.com/h2az6kt.png">http://i.imgur.com/h2az6kt.png</a><br>Its not even the right direction, any Idea?</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741182">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741182">7</a> by Raymond Camden
		posted on 12/29/2013 at 7:35 PM
		</div>
		<div class="comment_text"><p>Odd. Add a new image to the html, just something like &lt;img id="ray"&gt;. Then in the success function above, set ray's src to picuri. Tell me if the image there is ok.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741187">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741187">8</a> by andrew
		posted on 5/10/2014 at 3:46 AM
		</div>
		<div class="comment_text"><p>Dear Raymond, I'm not a programmer, just using phonegap for fun, so not familiar with code, can you please describe how to get the full image from camera and set the watermark's size? Thank you.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741189">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741189">9</a> by Raymond Camden
		posted on 5/11/2014 at 4:10 PM
		</div>
		<div class="comment_text"><p>While you don't necessarily have to be a "programmer", in the formal sense, I do not recommend trying to use my code if you know *nothing* about code. I wouldn't recommend doing anything with PhoneGap really. I'd take the time to learn JavaScript basics at a minimum just so you are at least able to read the code and see what it is doing.</p><p>That being said: To get the original full size image, you remove the targetWidth/Height stuff from the call. That tells to code to NOT resize it. As for the watermark, I think you would need to create it the size you want. drawImage doesn't let you resize, it just specifies where on the canvas it goes.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741190">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741190">10</a> by andrew
		posted on 5/12/2014 at 2:57 AM
		</div>
		<div class="comment_text"><p>Thanks for the respond, actually I tried all, removing target's dimensions, changing/adding canvas size, changing/adding watermark's size, etc. No effect, just cropped image. Your idea with additional img id=ray is working, script shows full image, but of course without watermark. I created an easy app for iPad using phonegap via adobe creative cloud, nothing interesting, just photo gallery, so I find your idea with "picture in picture" very interesting, it can be used to show photograph from the gallery on the wall in real apartments. Maybe you know the complete script which allow to insert picture in picture? Regards, A.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741193">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741193">11</a> by andrew
		posted on 5/12/2014 at 4:03 AM
		</div>
		<div class="comment_text"><p>perhaps I found a solution, it is necessary to specify canvasDom size, it's working now, thank you!<br>img.onload = function(e) {<br>	canvasDom.width=2048;<br>        canvasDom.height=1536;<br>            canvas.drawImage(img,0,0);<br>            canvas.drawImage(watermark, canvasDom.width-watermark.width, canvasDom.height-watermark.height);<br>        }</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741194">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741194">12</a> by Raymond Camden
		posted on 5/12/2014 at 5:13 AM
		</div>
		<div class="comment_text"><p>Oh nice - thanks for sharing!</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741196">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741196">13</a> by dev
		posted on 7/8/2014 at 9:56 AM
		</div>
		<div class="comment_text"><p>hi,<br>This code is not working.Also,not capturing image....</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741197">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741197">14</a> by Raymond Camden
		posted on 7/8/2014 at 3:39 PM
		</div>
		<div class="comment_text"><p>When you checked the console, what did you see?</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741201">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741201">15</a> by dev
		posted on 7/8/2014 at 5:27 PM
		</div>
		<div class="comment_text"><p>Hi,<br>Its showing  like below..<br>Watermark test <br>button- not working---you have disabled in your code...</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741205">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741205">16</a> by dev
		posted on 7/8/2014 at 5:31 PM
		</div>
		<div class="comment_text"><p>Hi,<br>I have changed rk.png to Capture.png image...Still not working...<br>Thanks,</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741206">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741206">17</a> by dev
		posted on 7/8/2014 at 5:34 PM
		</div>
		<div class="comment_text"><p>Hi,<br>this is the code that im using...</p><p>&lt;head&gt;<br>&lt;script src="cordova-1.7.0.js"&gt;&lt;/script&gt;<br>&lt;script src="jquery.min.js"&gt;&lt;/script&gt;<br>&lt;script&gt;<br>var watermark;<br>var canvasDom;<br>var canvas;</p><p>function init() {<br>	document.addEventListener("deviceready", startUp, false);<br>}</p><p>function startUp() {</p><p>    canvasDom = $("#myCanvas")[0];<br>    canvas = canvasDom.getContext("2d");</p><p>    //Create a watermark image object<br>    watermark = new Image();<br>    watermark.src = "Capture.png";<br>    watermark.onload = function(e) {<br>        //you can only take pictures once this is loaded...<br>        $("#takePictureButton").removeAttr("disabled");<br>    }</p><p>	$("#takePictureButton").on("touchstart", function(e) {<br>		navigator.camera.getPicture(camSuccess, camError, {quality: 75, targetWidth: 400, targetHeight: 400, destinationType: Camera.DestinationType.FILE_URI});<br>	});</p><p>	function camError(e) {<br>		console.log("Camera Error");<br>		console.log(JSON.stringify(e));<br>	}</p><p>	function camSuccess(picuri) {<br>		console.log("Camera Success");</p><p>        var img = new Image();<br>        img.src=picuri;</p><p>        img.onload = function(e) {<br>            canvas.drawImage(img, 0, 0);<br>            canvas.drawImage(watermark, canvasDom.width-watermark.width, canvasDom.height - watermark.height);<br>        }</p><p>	}<br>}<br>&lt;/script&gt;<br>&lt;style&gt;<br>    #myCanvas {<br>        width: 400px;<br>        height: 400px;<br>    }<br>&lt;/style&gt;<br>&lt;/head&gt;</p><p>&lt;body onload="init()"&gt;</p><p>&lt;h1&gt;Watermark Test&lt;/h1&gt;</p><p>&lt;button id="takePictureButton" disabled&gt;Take a Picture&lt;/button&gt;</p><p>&lt;p/&gt;</p><p>&lt;canvas id="myCanvas"&gt;&lt;/canvas&gt;</p><p>&lt;/body&gt;<br>&lt;/html&gt;</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741202">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741202">18</a> by Raymond Camden
		posted on 7/9/2014 at 5:24 AM
		</div>
		<div class="comment_text"><p>Please do not post large code samples here. Instead, use a Pastebin or similar link.</p><p>You did not say if you saw an error in the console. Did you try that?</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741203">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741203">19</a> by dev
		posted on 7/9/2014 at 9:09 AM
		</div>
		<div class="comment_text"><p>Hello sir,<br>I don't see any error here.but image is not loading.I have placed image in www directory.My image name is Capture.<br>Thanks,</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741208">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741208">20</a> by Raymond Camden
		posted on 7/9/2014 at 3:35 PM
		</div>
		<div class="comment_text"><p>I'd start with some basic debugging then. For example, ensure the watermark is loading by adding a console.log message as the first line in watermark.onload.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741209">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741209">21</a> by dev
		posted on 7/9/2014 at 5:01 PM
		</div>
		<div class="comment_text"><p>No sir,its not loading.........</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713741210">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713741210">22</a> by Raymond Camden
		posted on 7/9/2014 at 6:14 PM
		</div>
		<div class="comment_text"><p>If you didn't use the same file name as me, then obviously you would need to change the src to match. When you test w/ your debug tools, you can also look at the Network panel to see how/if the request fails.</p></div>
	</div>
</div>
		
<div class="comment" id="c_2254089905">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_2254089905">23</a> (In reply to <a href="#c_1713741193">#11</a>) by Hax
		posted on 9/15/2015 at 3:02 AM
		</div>
		<div class="comment_text"><p>Hi all</p><p>How can you then make the picture preview fit the mobile screen size of any suitable mobile phone?</p><p>Many THX</p></div>
	</div>
</div>
		
<div class="comment" id="c_2254647740">
	<div>
		<img src="https://disqus.com/api/users/avatars/cfjedimaster.jpg" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_2254647740">24</a> (In reply to <a href="#c_2254089905">#23</a>) by Raymond Camden
		posted on 9/15/2015 at 1:06 PM
		</div>
		<div class="comment_text"><p>You could use CSS: width: 100%;</p></div>
	</div>
</div>
		
<div class="comment" id="c_2257910695">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_2257910695">25</a> (In reply to <a href="#c_2254647740">#24</a>) by Hax
		posted on 9/17/2015 at 3:21 AM
		</div>
		<div class="comment_text"><p>You see I was having troubles trying to get the captured picture to take up the width and height of the screen AND my watermark aligning exactly in the bottom right. For some reason my watermark goes beyond the bottom of the picture.</p><p>What would be ideal is some idea on how to move the watermark using the javascript with corresponding css.</p><p>Incidentally I'm using the window.InnerWidth parameter for the CanvasDom size and targetWidth/Height size. The point being that the sample picture should ideally fit within all reasonable mobile screen resolutions. MyCanvas CSS width/height is set to 100%</p><p>Its also hard to understand the relationship between the canvasDom size and the targetWidth size.</p><p>The only other thing this brilliant tutorial needs is a button to save the picture with watermark to internal storage.</p></div>
	</div>
</div>
		
<div class="comment" id="c_2258460765">
	<div>
		<img src="https://disqus.com/api/users/avatars/cfjedimaster.jpg" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_2258460765">26</a> (In reply to <a href="#c_2257910695">#25</a>) by Raymond Camden
		posted on 9/17/2015 at 1:25 PM
		</div>
		<div class="comment_text"><p>I know I've seen - somewhere - a Canvas to filesystem example for Cordova/PhoneGap. I don't have the URL handy, but I bet you could Google for it.</p></div>
	</div>
</div>
		
<div class="comment" id="c_2707096607">
	<div>
		<img src="https://disqus.com/api/users/avatars/disqus_rEgXm7hVa7.jpg" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_2707096607">27</a> by Luis Zapata
		posted on 6/1/2016 at 8:17 PM
		</div>
		<div class="comment_text"><p>Thanks, it works, but now, Do you know how to store the picture with the watermark in the cellphone?</p></div>
	</div>
</div>
		
<div class="comment" id="c_2707101833">
	<div>
		<img src="https://disqus.com/api/users/avatars/cfjedimaster.jpg" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_2707101833">28</a> (In reply to <a href="#c_2707096607">#27</a>) by Raymond Camden
		posted on 6/1/2016 at 8:20 PM
		</div>
		<div class="comment_text"><p>Check out the File plugin. It gives file system access.</p></div>
	</div>
</div>
		
<div class="comment" id="c_2707113747">
	<div>
		<img src="https://disqus.com/api/users/avatars/disqus_rEgXm7hVa7.jpg" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_2707113747">29</a> (In reply to <a href="#c_2707101833">#28</a>) by Luis Zapata
		posted on 6/1/2016 at 8:27 PM
		</div>
		<div class="comment_text"><p>I store regular camera pictures with this "entry.moveTo(parentEntry, myroute);", but it doesn't work with the canvas or the image, could you please give me a hint of which function should i use?. I'm reading this documentation page: <a href="http://disq.us/url?url=http%3A%2F%2Fdocs.phonegap.com%2Fen%2Fedge%2Fcordova_file_file.md.html%3AZP1lOct2FIUNXRLiz5xXOKV5mhA&amp;cuid=3321886" rel="nofollow noopener" title="http://docs.phonegap.com/en/edge/cordova_file_file.md.html">http://docs.phonegap.com/en...</a></p></div>
	</div>
</div>
		
<div class="comment" id="c_2707115327">
	<div>
		<img src="https://disqus.com/api/users/avatars/cfjedimaster.jpg" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_2707115327">30</a> (In reply to <a href="#c_2707113747">#29</a>) by Raymond Camden
		posted on 6/1/2016 at 8:28 PM
		</div>
		<div class="comment_text"><p>You need to get the binary data from the &lt;canvas&gt; element. I found a plugin to make it even easier: <a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fdevgeeks%2FCanvas2ImagePlugin%3AUE4CUzRfvyRm4MFHKRaqBvNLYkg&amp;cuid=3321886" rel="nofollow noopener" title="https://github.com/devgeeks/Canvas2ImagePlugin">https://github.com/devgeeks...</a></p></div>
	</div>
</div>
		
<div class="comment" id="c_2707123725">
	<div>
		<img src="https://disqus.com/api/users/avatars/disqus_rEgXm7hVa7.jpg" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_2707123725">31</a> (In reply to <a href="#c_2707115327">#30</a>) by Luis Zapata
		posted on 6/1/2016 at 8:33 PM
		</div>
		<div class="comment_text"><p>Thank you very much, I will check it!</p></div>
	</div>
</div>
		