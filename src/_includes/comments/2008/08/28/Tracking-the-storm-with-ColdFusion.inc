
<div class="comment" id="c_1713685366">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685366">1</a> by todd sharp
		posted on 8/28/2008 at 5:53 PM
		</div>
		<div class="comment_text"><p>So next step is to auto post to Twitter the distance, right? :)</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685348">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685348">2</a> by Brian Swartzfager
		posted on 8/28/2008 at 6:40 PM
		</div>
		<div class="comment_text"><p>Or put the data in a module on your blog at the very least.  :)</p><p>But in all seriousness, that's pretty cool Ray.  Nice work!</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685367">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685367">3</a> by Jonas Eriksson
		posted on 8/28/2008 at 6:42 PM
		</div>
		<div class="comment_text"><p>Awesome stuff Ray!<br>The CFlib to measure distance is very cool, gonna look into that myself one of these days.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685363">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685363">4</a> by phill.nacelli
		posted on 8/28/2008 at 7:07 PM
		</div>
		<div class="comment_text"><p>Ok, so now we strap an gps device on Ray, take his coordinates and compare to the storm and create a "Watch Ray Run From the Storm" ColdFusion game!  Who wants to write the "Ray's Odds of Survival" module?</p><p>Man I love my job!</p><p>On a more serious note, Ray I hope you and your family are not struck by this, stay safe buddy.</p><p>Cheers..</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685368">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685368">5</a> by Raymond Camden
		posted on 8/28/2008 at 7:15 PM
		</div>
		<div class="comment_text"><p>@phill: After Rita, trust me, I'm not staying around again.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685349">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685349">6</a> by Mat Evans
		posted on 8/28/2008 at 7:19 PM
		</div>
		<div class="comment_text"><p>this is so asking for a mashup with google maps/live maps etc.. get an sms gateway running, it'll txt ya when you have to start running, and I reckon wouldn't be too hard to work out the direction you have to run in!</p><p>in all seriousness, I hope you guys stay safe.. in the UK we get hurricanes once in a blue moon and even then the weather men try to make us believe there isn't one coming :)</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685353">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685353">7</a> by Raymond Camden
		posted on 8/28/2008 at 9:53 PM
		</div>
		<div class="comment_text"><p>Holy crap, it's actually working.</p><p>8:32AM (I manually ran it): distance 4522.8<br>12:00PM : distance 4508.8</p><p>20 miles closer.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685356">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685356">8</a> by phill.nacelli
		posted on 8/28/2008 at 9:55 PM
		</div>
		<div class="comment_text"><p>Nice.. now run!!!!!</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685351">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685351">9</a> by Dave DuPlantis
		posted on 8/28/2008 at 9:55 PM
		</div>
		<div class="comment_text"><p>Very nice!</p><p>I wonder, might you be able to simplify your regular expression by removing EAST and WEST from the LATITUDE portion and NORTH and SOUTH from the LONGITUDE portion?</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685355">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685355">10</a> by Raymond Camden
		posted on 8/28/2008 at 9:57 PM
		</div>
		<div class="comment_text"><p>I thought about that - but I like it there as it kinda makes it easier for me to read. Ie, I know that dir is there in the regex, so even though I don't use it, to me it makes the regex a bit tighter.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685357">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685357">11</a> by Ken Auenson
		posted on 8/28/2008 at 10:11 PM
		</div>
		<div class="comment_text"><p>Ray,<br>I took your code and have been modifying it and playing with it a bit.<br>One of the changes I did make is to remove "CENTER OF TROPICAL STORM GUSTAV WAS LOCATED " from the RegEx, this still works.<br>I plan to spend some time tonight making a cool little app where you can search for a given zip and see the results with Google Maps.  I will post that URL (with updated source) when I have it working.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685359">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685359">12</a> by Joe Finan
		posted on 8/28/2008 at 10:30 PM
		</div>
		<div class="comment_text"><p>I also took the code, added a little text box/button to search for a given zip code...  Now it's failing at "&lt;cfif arrayLen(match.pos) is 5&gt;", even in the original code, anyone else run into this problem?</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685360">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685360">13</a> by Raymond Camden
		posted on 8/28/2008 at 10:32 PM
		</div>
		<div class="comment_text"><p>If you cfdump match, what do you get?</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685361">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685361">14</a> by Joe Finan
		posted on 8/28/2008 at 10:37 PM
		</div>
		<div class="comment_text"><p>struct <br>LEN array  <br>1 0</p><p>POS array  <br>1 0</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685372">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685372">15</a> by Raymond Camden
		posted on 8/28/2008 at 10:46 PM
		</div>
		<div class="comment_text"><p>That doesn't make sense then. It's an array. The len isn't 5, which means it couldn't match, but the code should handle that.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685383">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685383">16</a> by Joe Finan
		posted on 8/28/2008 at 10:55 PM
		</div>
		<div class="comment_text"><p>Sorry, maybe i worded that wrong...  The code isn't failing, it's displaying the message "Couldn't find my matches in the string.".  I was just wondering if it was something i changed, but it looks like the result from the rsslink is where the problem is.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685377">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685377">17</a> by Raymond Camden
		posted on 8/28/2008 at 10:57 PM
		</div>
		<div class="comment_text"><p>Ah, same here. Let me see why my regex is failing.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685373">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685373">18</a> by Raymond Camden
		posted on 8/28/2008 at 10:58 PM
		</div>
		<div class="comment_text"><p>Ah yes, the string changed. It's now:</p><p>THE CENTER OF TROPICAL STORM GUSTAV WAS LOCATED NEAR THE EASTERN TIP OF JAMAICA OR NEAR LATITUDE 17.9 NORTH...LONGITUDE 76.2 WEST</p><p>I'm thinking now to assume the first instance of LATITUDE X...LONGITUDE Y will be my search string.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685379">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685379">19</a> by Raymond Camden
		posted on 8/28/2008 at 11:00 PM
		</div>
		<div class="comment_text"><p>Ok, regex line is below and still works. Again though, it assumes first instance of LONG... etc, so it's not "secure" I guess.</p><p>&lt;cfset regex = "LATITUDE ([[:digit:]\.]+)[[:space:]]*([NORTH|SOUTH|EAST|WEST]+)...LONGITUDE ([[:digit:]\.]+)[[:space:]]*([NORTH|SOUTH|EAST|WEST]+)"&gt;</p><p>In case folks are curious: Distance is now 4505.8. 3 miles closer. RUN RAY RUN!</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685378">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685378">20</a> by Joe Finan
		posted on 8/28/2008 at 11:34 PM
		</div>
		<div class="comment_text"><p>I'm prolly doing something wrong again, but i added a zip code text box to change the location...  I put in 60448 and it shows that i'm closer to GUSTAV, but I'm in Illinois!?  Maybe i should start running, i'm only 3691.74 miles from Gustav...</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685382">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685382">21</a> by Raymond Camden
		posted on 8/29/2008 at 1:21 AM
		</div>
		<div class="comment_text"><p>I promise - no more comments till tomorrow morning:</p><p>4pm cst: distance:4496.3</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685375">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685375">22</a> by Raymond Camden
		posted on 8/30/2008 at 1:17 AM
		</div>
		<div class="comment_text"><p>FYI, you have to change the query of query now that GUSTAV is a hurricane. My QofQ is now:</p><p>&lt;!--- find "Public Advisory" ---&gt;<br>&lt;cfquery name="pa" dbtype="query" maxrows="1"&gt;<br>select	rsslink, content, title<br>from	results<br>where	title like '%GUSTAV Public Advisory Number%'<br>&lt;/cfquery&gt;</p><p>Current miles: 4414.96</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685376">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685376">23</a> by Raymond Camden
		posted on 8/30/2008 at 1:33 AM
		</div>
		<div class="comment_text"><p>WOw. Two more bugs. The first one I can't believe I - and all you guys - missed. ;) Notice in my regex I match LAT then LONG, but my code was setting LONG than LAT. I had them reversed. You need to change regex IF block to:</p><p>&lt;cfset lat = mid(text, match.pos[2], match.len[2])&gt;<br>&lt;cfset latdir = mid(text, match.pos[3], match.len[3])&gt;<br>&lt;cfset long = mid(text, match.pos[4], match.len[4])&gt;<br>&lt;cfset longdir = mid(text, match.pos[5], match.len[5])&gt;</p><p>Ok, now the next problem is that NOAA uses direction in their results. Remember how I said I didn't need that? I was wrong. Turns out their longitude, when I use it for the math part and distance, needs to be negative.</p><p>I figure Gustav won't jump back across to the East so I just did this:</p><p>&lt;cfset distance = latLonDist(lat,-1*long,myLat,myLong,"sm")&gt;</p><p>The good news is that now the miles is a lot more sensible to me. I thought 4k seemed rather high. Gustav is now only 1082.92 miles away. Sweet!</p><p>p.s. If anyone wants a clean copy of the script, let me know.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685374">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685374">24</a> by Adam Tuttle
		posted on 9/6/2008 at 10:37 PM
		</div>
		<div class="comment_text"><p>I posted about some modifications I made to this code (including the corrections) here:</p><p><a href="http://disq.us/url?url=http%3A%2F%2Ffusiongrokker.com%2Fpost%2Ftracking-the-storm-redux%3A89LCOiAELtCxTk5VyDNPUCQ-HfQ&amp;cuid=3321886" rel="nofollow noopener" title="http://fusiongrokker.com/post/tracking-the-storm-redux">http://fusiongrokker.com/po...</a></p><p>My code also properly accounts for N/S/E/W to make the coordinates negative, and adds some caching (and cache refreshing) ability.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685381">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685381">25</a> by Misty
		posted on 5/26/2014 at 11:06 AM
		</div>
		<div class="comment_text"><p>Hi Ray,</p><p>Offtopic; How we track the GPS on a Mobile Device with ColdFusion, I am looking for auch an API or Service or Something in CF</p><p>Any Idea, Clue</p><p>Regards</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713685384">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713685384">26</a> by Raymond Camden
		posted on 5/26/2014 at 6:10 PM
		</div>
		<div class="comment_text"><p>You can't. You can only track it client side. But once you have the GPS (using navigator.geolocation - <a href="https://disq.us/url?url=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FNavigatorGeolocation.geolocation%29%3AdfBSR4eVb25bmNlp-C5o52U2g-w&amp;cuid=3321886" rel="nofollow noopener" title="https://developer.mozilla.org/en-US/docs/Web/API/NavigatorGeolocation.geolocation)">https://developer.mozilla.o...</a>, it is trivial to send that data to CF using an XHR hit.</p></div>
	</div>
</div>
		