
<div class="comment" id="c_1713715355">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715355">1</a> by Dan Vega
		posted on 5/11/2009 at 1:16 AM
		</div>
		<div class="comment_text"><p>That is a really great idea. To say that emails get ignored is an understatement! Thanks for the great example and use case.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715363">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715363">2</a> by Shane Zehnder
		posted on 5/11/2009 at 6:45 AM
		</div>
		<div class="comment_text"><p>Subscribing to comments</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715357">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715357">3</a> by daniel
		posted on 5/11/2009 at 9:35 AM
		</div>
		<div class="comment_text"><p>Great! I've been looking for something like that but: could you do the same but with only javascript in the client side?<br>I whould love to see this example in plain html-js.<br>Is it possible? I read something about Flex-JS bridge script but i haven t got it to work.<br>thanks</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715361">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715361">4</a> by Raymond Camden
		posted on 5/11/2009 at 3:57 PM
		</div>
		<div class="comment_text"><p>Technically, the Flex-JS bridge would not be 'just JS'. Still interested in having me a dig a bit more into it?</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715359">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715359">5</a> by daniel
		posted on 5/11/2009 at 4:16 PM
		</div>
		<div class="comment_text"><p>Oh yes! <br>if I'm the only one and it s too much work you can just point me some links ;)<br>I understand that a flash file will always be there to permit the comunication with the push from the server... and the bridge sends the "message" forward to JS... <br>a jedi example is always nice to have... thanks</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715349">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715349">6</a> by Andy Sandefer
		posted on 5/11/2009 at 6:13 PM
		</div>
		<div class="comment_text"><p>@Ray and @daniel<br>I'm very much interested in this for some pretty cool reasons.  For instance, I'm writing a custom manufacturing app for someone using CFAjax and SQL Server and it would be wonderful if I had a small cfdiv area of the interface where I could route alerts to people who were subscribed to those types of events.  So say if the production manager were logged in and he's a member of a specific security group (production inquiry) then I could route a message to the production inquiry stating that an order just reached a specific stage in the production process.  I would ideally have a small, system tray style area of the user interface where these types of alerts would flash.  Perhaps a scrollable cfdiv or cflayoutarea that displayed alerts by type in a grid or a group of links where a user could onClick them to drill down to a cfwindow that provided a bit more detail.</p><p>Event Type     Event Count<br>--------------------------<br>Receiving      10<br>Production     3<br>Sales          0<br>Shipping       17</p><p>When I say routing a message that could be as simple as inserting a record in a table.  The part that I'm confused on is the auto refresh without bringing the browser to its knees.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715356">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715356">7</a> by todd sharp
		posted on 5/11/2009 at 7:32 PM
		</div>
		<div class="comment_text"><p>Did I miss where you declared 'consumer'?</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715364">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715364">8</a> by Raymond Camden
		posted on 5/11/2009 at 7:33 PM
		</div>
		<div class="comment_text"><p>You did. Line 3 of the first Flex code. Sorry if this wasn't obvious!</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715362">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715362">9</a> by todd sharp
		posted on 5/11/2009 at 8:10 PM
		</div>
		<div class="comment_text"><p>Ahh!  My fault, didn't even look up there.  Probably because I usually do style first, then script, then things like this next.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715358">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715358">10</a> by peter
		posted on 5/11/2009 at 10:11 PM
		</div>
		<div class="comment_text"><p>Nice little example that seems to work well.</p><p>Can I ask how much bandwidth or resource this takes up? I left mine running while I was at work today and it seems quite a few people were trying it out.</p><p>Any idea how many this could work for or is the resource on the client side?</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715374">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715374">11</a> by Syed
		posted on 5/12/2009 at 4:45 AM
		</div>
		<div class="comment_text"><p>Ray,<br>I installed Air app on my desktop; however, when i run the application, it just shows blank window. Air window suppose to show something right?</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715376">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715376">12</a> by Raymond Camden
		posted on 5/12/2009 at 4:47 AM
		</div>
		<div class="comment_text"><p>Did you visit the 'special' URL to fake a sale?</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715372">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715372">13</a> by Raymond Camden
		posted on 5/12/2009 at 7:21 AM
		</div>
		<div class="comment_text"><p>@Andy: Some thoughts on your comment, and PLEASE remember I'm still earning this.</p><p>In my GameOne post, I talked about subtopics. That is one way to have multiple messages going through but w/ different guys listening in on them. In GameOne, it was like I had 2 radios in the AIR app, each tuned to a different station. That could possibly work for you.</p><p>Another way to do is with selectors. (Warning, not 100% sure that is the right term.) This lets you create a consumer that uses SQL-like instructions to listen in for messages. This allows for more complex, dynamic consumers than simply "listen for topic X". Unfortunately, ColdFusion's Message Gateway does not support this feature.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715373">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715373">14</a> by Raymond Camden
		posted on 5/12/2009 at 7:25 AM
		</div>
		<div class="comment_text"><p>@peter: My understanding is that it uses AMF for communication. Therefore it shoul dbe nice and slim.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715371">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715371">15</a> by daniel
		posted on 5/12/2009 at 1:19 PM
		</div>
		<div class="comment_text"><p>Hei again.</p><p>I come back to the ajax thema, I'm really interested to get server push into js.<br>The only documentation I found about the flex-js-bridge is in this link.</p><p><a href="http://disq.us/url?url=http%3A%2F%2Flivedocs.adobe.com%2Flivecycle%2Fes%2FsdkHelp%2Fprogrammer%2Flcds%2Fwwhelp%2Fwwhimpl%2Fjs%2Fhtml%2Fwwhelp.htm%3Fhref%3Dajaxds_2.html%3Aomv0AqnLTkan9zIjwAw5pgxDDYA&amp;cuid=3321886" rel="nofollow noopener" title="http://livedocs.adobe.com/livecycle/es/sdkHelp/programmer/lcds/wwhelp/wwhimpl/js/html/wwhelp.htm?href=ajaxds_2.html">http://livedocs.adobe.com/l...</a></p><p>ray, do you have any experience with that?</p><p>The reason why i want to have the server push in js is that I don t have the time to learn Flex, I know I should and Flex has a lot of goodies that I should care about. I have more experience in JS and getting JSON pushed from the server to jQuery could open so many exciting posibilities...  and get data pushed from the server into old applications that are not flex based could be an exellent idea.<br>I hope to get some time so I can post you some details if i do manage.<br>thanx again ray, really inspired example you posted.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715367">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715367">16</a> by daniel
		posted on 5/12/2009 at 2:52 PM
		</div>
		<div class="comment_text"><p>where i wrote ray I ment off course Raymond ;)</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715369">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715369">17</a> by Raymond Camden
		posted on 5/12/2009 at 3:14 PM
		</div>
		<div class="comment_text"><p>I did a bit of research into the bridge yesterday. You are still going to need to learn a bit of Flex in order to use it in your applications. Also, I think for the purposes described in this blog entry, we don't really need the bridge. The bridge provides a way for JS to natively call ActionScript functions within your Flex code. But in our example here, we want Flex to run JS whenever a message is received. In that case, the built in support Flex has via externalInterface (I believe that is the name) allows for all the communication we need.</p><p>Going to try to get a demo of this sometime this week.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715368">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715368">18</a> by daniel
		posted on 5/12/2009 at 3:26 PM
		</div>
		<div class="comment_text"><p>you rock man, looking forward to see you example.</p><p>Some AS3 would be nice to learn, and sure i will... but the main logikk i have it already in jQuery and I can t rebuild everything.<br>I m sure this is something a lot of people will enjoy.</p><p>cheers from Norway!</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715370">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715370">19</a> by Andy Sandefer
		posted on 5/12/2009 at 8:25 PM
		</div>
		<div class="comment_text"><p>@Ray<br>Just to follow up, I did extensive research on this last night and I've basically got this narrowed down to 2 options.</p><p>1.  I can create a companion (system tray) style AIR app like you've done that will pop-up event information for my users.  They'd obviously have to login to it so that the app would know would groups the respective users belonged to and could send messages accordingly.</p><p>2.  I can try to have a the included menu page for the app do polling with a JavaScript setInterval function and the page will handle the create, hide and destroy of a cfwindow when it catches an applicable event from the db or a log file.  I know that this is not a true push-style solution and will require much testing to gauge browser resource hogging impact on the client.  Luckily the users have all standardized on one browser (Firefox).</p><p>At any rate, I'll let you know which path I end up choosing and how it works out.</p><p>Thanks for the ideas.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715375">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715375">20</a> by Andy Sandefer
		posted on 5/12/2009 at 11:06 PM
		</div>
		<div class="comment_text"><p>@Ray - the cfajax polling idea works without any performance degradation!</p><p>CFC Code (applisten.cfc)...<br>&lt;cfcomponent&gt;<br>	&lt;cffunction name="readEventLog" access="remote" returntype="boolean"&gt;<br>		&lt;cfquery name="qryAppEventLog" datasource="#REQUEST.ds1#"&gt;<br>			SELECT		AppEventLogID<br>			FROM			AppEventLog<br>		&lt;/cfquery&gt;<br>		&lt;cfset eventFired = (qryAppEventLog.recordCount GT 0)&gt;<br>		&lt;cfreturn eventFired&gt;<br>	&lt;/cffunction&gt;	<br>&lt;/cfcomponent&gt;</p><p>CFM Template Code (eventloop.cfm)...<br>&lt;cfajaximport tags="cfwindow"&gt;<br>&lt;cfajaxproxy cfc="bmems.cfc.applisten" jsclassname="proxyAppListen"&gt;</p><p>&lt;html xmlns="<a href="http://disq.us/url?url=http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%3AA6NInarpbzWm6HKZDXlFrwZefzc&amp;cuid=3321886" rel="nofollow noopener" title="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</a>"&gt;<br>&lt;head&gt;<br>&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;<br>&lt;title&gt;Untitled Document&lt;/title&gt;<br>&lt;script type="text/javascript"&gt;		<br>	checkAlertsErrorHandler = function(code,msg) {<br>		alert('Error ' + code + ':  ' + msg);<br>	}</p><p>	setAlertInterval = function(){<br>		alertInterval = setInterval('checkAlerts()', 10000);<br>	}</p><p>	clearAlertInterval = function(){<br>		clearInterval(alertInterval);<br>	}</p><p>	checkAlerts = function(){<br>		proxyReadEventLog.readEventLog();<br>		console.log('checkAlerts was called...');		<br>	}</p><p>	checkAlertsCallback = function(newEvents){<br>		if (newEvents &amp;&amp; eventWinClosed){<br>			day = new Date();<br>			eventWinID = 'event' + day.getTime();</p><p>			eventWinClosed = false;<br>			ColdFusion.Window.create(eventWinID,'Event Notification','eventnotifier.cfm?formName=' + eventWinID, windowOptions);<br>			ColdFusion.Window.onHide(eventWinID, killEventWin);<br>		}<br>	}</p><p>	closeEventWin = function(){<br>		ColdFusion.Window.onHide(eventWinID, killEventWin);<br>		ColdFusion.Window.hide(eventWinID);<br>	}</p><p>	killEventWin = function(){<br>		ColdFusion.Window.destroy(eventWinID, true);<br>		eventWinClosed = true;<br>	}</p><p>	initHandler = function(){<br>		windowOptions = new Object();<br>		windowOptions.width = 200;<br>		windowOptions.height = 100;<br>		windowOptions.x = 50;<br>		windowOptions.y = 50;<br>		windowOptions.modal = false;<br>		windowOptions.resizeable = false;<br>		windowOptions.initshow = true;<br>		windowOptions.draggable = true;<br>		windowOptions.closable = true;<br>		windowOptions.headerstyle = 'font-family: verdana; background-color: #0066FF;';</p><p>		eventWinClosed = true;<br>		proxyReadEventLog = new proxyAppListen();		<br>		proxyReadEventLog.setErrorHandler(checkAlertsErrorHandler);<br>		proxyReadEventLog.setCallbackHandler(checkAlertsCallback);<br>		proxyReadEventLog.readEventLog();<br>		setAlertInterval();<br>	}<br>&lt;/script&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>	&lt;h1&gt;Event Loop Test 1 - cfwindow notifier...&lt;/h1&gt;<br>	&lt;cfset AjaxOnLoad("initHandler")&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;</p><p>CFM Template Code for the cfwindow (eventnotifier.cfm)...<br>New Events have occurred...</p><p>&lt;a href="javascript:closeEventWin()"&gt;Close&lt;/a&gt;</p><p>End Code - Begin Rambling...<br>I loaded this in Firefox, checked the Task Manager and was at 60MB.  Went outside, fired up a smoke and had a coffee, still at 60MB.  Went to BK, got the talking Star Trek Scotty bobble head, ate and drove back - still at 60MB!</p><p>It's definitely not perfect and it's definitely not push but it works.  Next I'll try to test this with a cfdiv setup bound to a JavaScript ColdFusion.navigate style function rather than a cfwindow.</p><p>If you look closely I'm doing some stuff with globals (so that they're only conjured up once) and I'm testing to make sure that the window is not already opened.  There are other things that I want to try in various ways to gauge browser performance impact.  As of now it's been running for over an hour without any significant processor or memory usage.</p><p>The trick of this is that I'm going to have to expand upon this for the real app as I'll have 30 people hitting this app throughout the course of the day.  Basically I'll be tracking everyone's event notifications and the various methods within the app will write event records to a table.  Once the cfc/js lets the user know that an important event has occurred I can chain together a couple of callbacks to mark the table record as being "read" for that user's event record.  I'm thinking about using some timer magic to auto-close and destroy the cfwindow after a few seconds (if the user doesn't close it first).  I also know that I'll have to keep this table lean and mean so I'm considering a ColdFusion Scheduled task that will purge the events that have been "read" so as to keep the filtered select based on the user's session info to check for events pertinent to them down to a very small result set.<br>Let me know what you think!</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715352">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715352">21</a> by Raymond Camden
		posted on 5/13/2009 at 7:12 AM
		</div>
		<div class="comment_text"><p>Pretty interesting there. I'm going to try to find time later int he week to work on the HTML version (with embedded Flex). I'd be curious to compare memory usage.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715350">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715350">22</a> by daniel
		posted on 5/13/2009 at 9:51 AM
		</div>
		<div class="comment_text"><p>@Andy: Nice solution but as you say it s not a push from a server. I think ajax calls each 10 seconds could be a great solution for a 30 people application. What about if you have 10 000 users? I think your server will be answering a lot of unesesary requests... or maybe the push solution is even worst ... i don t know.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715354">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715354">23</a> by Andy Sandefer
		posted on 5/13/2009 at 4:37 PM
		</div>
		<div class="comment_text"><p>@Ray<br>I definitely want to see what you've done because I'll probably deploy it!</p><p>@daniel<br>I know, but remember from my earlier postings that this is not a public facing application.  Also keep in mind that I'm that one idiot that will try something just to see if it can be done!  Calling home to check for data is not an optimal solution - but remember that anyone who has a smart phone other than blackberry is doing just that - all the time :0</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715377">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715377">24</a> by Andy Sandefer
		posted on 5/15/2009 at 6:45 PM
		</div>
		<div class="comment_text"><p>In case anyone tried to use the cfajax polling code above I need to make a correction to a typo on the cfwindow options...<br>It should've read<br>  windowOptions.resizable = false;<br>and NOT<br>  windowOptions.resizeable = false;</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713715378">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713715378">25</a> by daniel
		posted on 5/26/2009 at 11:20 AM
		</div>
		<div class="comment_text"><p>Hei guys, i didn t got the time to try the flash js bridge thing we were talking about... but someone pointed this link to me yesterday.<br><a href="http://disq.us/url?url=http%3A%2F%2Fcfjavascript.riaforge.org%2F%3AB1be0Ur5FA3VUr00eM4fp6FhIus&amp;cuid=3321886" rel="nofollow noopener" title="http://cfjavascript.riaforge.org/">http://cfjavascript.riaforg...</a><br>I will take a look this weekend.</p></div>
	</div>
</div>
		