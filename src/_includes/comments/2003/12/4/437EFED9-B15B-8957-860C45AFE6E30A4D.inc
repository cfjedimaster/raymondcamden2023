
<div class="comment" id="c_1713615230">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713615230">1</a> by Michael Dinowitz
		posted on 12/5/2003 at 6:21 AM
		</div>
		<div class="comment_text"><p>Just a bit of clarification. In CF 5, the UID was a unique identifier generated by the mail server for each message. In <a href="http://disq.us/url?url=http%3A%2F%2Fpost.office%3AtPnVAXJuJrSLaqZpVXEJfZJSJf8&amp;cuid=3321886" rel="nofollow noopener" title="post.office">post.office</a>, the UID happened to the the file name. Other mail servers may differ. In CFMX (version 1 on), the UID was changed to be the messageid of the message. This is a header value that does not always exist (is not required by the RFC). <br>When CFPOP retireves a message, it parses the message, gets the header and returns chunks of it as CFPOP variables. When getting a message by UID in CFMX, it has to parse the message to find the messageid that matches the UID that is sent in. <br>This was identified as a bug late in the redsky cycle and there is a tech note mentioning that a fix was already placed into the next edition of CF. If you want, I can look up the tech note.<br>As for message placement, a new message is added to the 'bottom' of the mail 'stack' so the more messages in a directory, the slower it will be to get a message by UID in CFMX.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713615231">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713615231">2</a> by Raymond Camden
		posted on 12/5/2003 at 5:08 PM
		</div>
		<div class="comment_text"><p>Michael, does that mean it is NOT safe to read 1, delete 1 and assume you are deleting the same msg you read? I thought that if a msg came in, it would be number N+1 where N is the old # of messages.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713615235">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713615235">3</a> by Michael Dinowitz
		posted on 12/5/2003 at 7:27 PM
		</div>
		<div class="comment_text"><p>The first message the system received in real time is listed as message 1. The second is message 2. Even if the second is dated a year earlier, the mail server will still set it to message 2.</p><p>When using the message number method and no one else is getting messages as your doing it, then there is no problem with getting message 1, deleting message 1. The problem does come in if you plan to get and delete multiple messages at a time where they are non-sequential. Deleting message 1,2,3,5 will have to be done either by deleting message 5 first, then 3, then 2, then 1 OR by deleting all of the numbers at once (it's possible in the CFPOP tag). <br>Deleting by message number is dangerous but if done correctly, it can be safe. Deleting by UID is much safer, but is currently not a viable option in CFMX. I'd suggest using the CFX_Pop3 tag for now and once the next fix from MM comes out (standalone or full release), then use that. <br>If you need, I've got a TON of code for mail processing as I do it for my lists, for my archives of other lists, for my personal spam catcher, etc.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713615243">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713615243">4</a> by Raymond Camden
		posted on 12/5/2003 at 8:00 PM
		</div>
		<div class="comment_text"><p>Yea, I get the idea about being careful how I delete, it is the same as working w/ an array. In this case, I'm the only "reader" of the pop account, so I guess I'm ok with using cfpop.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713615237">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713615237">5</a> by Tom Jordahl
		posted on 12/18/2003 at 10:44 PM
		</div>
		<div class="comment_text"><p>I thought I had gotten that fix in to 6.1 but it went in right after redsky shipped.  Sorry about that.  Here are the details of what will change next time:</p><p>Fix bug 52970: CFPOP uid field does not match CF5.</p><p>The 'uid' column had been altered in CFMX and the UID being returned from CFPOP is actually the Message-ID of the message, not the UID. In earlier versions of CF, the CFPOP tag would return the UID of the message. This is by far superior to the use of the message ID.</p><p>Added a new column in the query returned by CFPOP: MessageID.</p><p>This is the value of the Message-ID header in each message. Any CFMX user that was depending on uid to contain this value can now use this column.</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713615239">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713615239">6</a> by Raymond Camden
		posted on 12/18/2003 at 10:53 PM
		</div>
		<div class="comment_text"><p>Tom - a few questions:</p><p>1) Are you saying that the fix didn't make 6.1, and is also not available as a hotfix? Any way we can get a hotfix out for it?</p><p>2) Your fix seems wrong though - while it does add a new column to the query returned, my real need for a UID was when I called "get one message" or "delete one message", having the new column does not help if I can't use the value as well when calling cfpop. Does that make sense?</p></div>
	</div>
</div>
		
<div class="comment" id="c_1713615241">
	<div>
		<img src="//a.disquscdn.com/1611874952/images/noavatar32.png" class="comment_author_profile_pic">
	</div>
	<div>
		<div class="comment_header">
		Comment <a href="#c_1713615241">7</a> by Tom Jordahl
		posted on 12/18/2003 at 11:06 PM
		</div>
		<div class="comment_text"><p>1. There is currently no hot fix for this.  I don't know if we can get one out, I mucked with quite a but of the POP code to make it go faster.  The 'bug' fix doesn't give you more than performance, as the current implementation should work correctly, just slowly. :-(</p><p>2. The UID in the fixed code is now the (correct) value returned by the POP server via the UIDL POP command.  I just added the MessageID field in the return query as a help for those you might have coded their CFML to depend on it.  You will be able to use this value to get/delete messages in an effcient way.</p><p>I hope this clears it up.</p></div>
	</div>
</div>
		